# 🚀 翻译插件安装和测试指南

## 📋 安装步骤

### 1. 准备插件文件
确保您的项目目录结构如下：
```
Fengsha_Trae_001/
├── manifest.json          # 扩展配置文件
├── src/
│   ├── background.js      # 后台脚本
│   ├── content.js         # 内容脚本
│   ├── content.css        # 样式文件
│   ├── popup/
│   │   ├── popup.html     # 弹窗页面
│   │   ├── popup.css      # 弹窗样式
│   │   └── popup.js       # 弹窗脚本
│   └── utils/             # 工具函数
├── icons/                 # 图标文件
└── test files...          # 测试文件
```

### 2. 在Chrome中加载扩展

1. **打开Chrome扩展管理页面**
   - 在地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 在页面右上角打开"开发者模式"开关

3. **加载未打包的扩展程序**
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录：`d:\9005_IDEauthorized\ID-Laoxu_web_001\Fengsha_Trae_001`
   - 点击"选择文件夹"

4. **验证安装**
   - 扩展应该出现在扩展列表中
   - 状态显示为"已启用"
   - 浏览器工具栏应该显示扩展图标

## 🔧 配置API密钥

### 1. 获取百度翻译API密钥
1. 访问 [百度翻译开放平台](https://fanyi-api.baidu.com/)
2. 注册账号并登录
3. 创建应用获取 APP ID 和密钥
4. 记录您的 APP ID 和 APP Key

### 2. 在插件中配置
1. 点击浏览器工具栏中的扩展图标
2. 在弹出的配置界面中输入：
   - 百度翻译 APP ID
   - 百度翻译密钥
3. 点击"测试连接"验证配置
4. 点击"保存配置"保存设置

## 🧪 功能测试

### 方法1：使用测试页面
1. 打开测试页面：`plugin-test.html`
2. 按照页面指引进行各项测试：
   - 插件安装检测
   - API连接测试
   - 权限检查
   - 视频翻译功能测试

### 方法2：在实际网站测试
1. 访问包含英文视频的网站（如YouTube）
2. 点击扩展图标启动翻译功能
3. 播放视频，观察是否出现中文字幕

## 🔍 故障排除

### 常见问题及解决方案

#### 1. 扩展无法加载
**症状**：Chrome提示加载失败
**解决方案**：
- 检查manifest.json文件格式是否正确
- 确保所有引用的文件都存在
- 查看Chrome扩展页面的错误信息

#### 2. API连接失败
**症状**：测试连接时出现错误
**解决方案**：
- 验证APP ID和密钥是否正确
- 检查网络连接
- 确认百度翻译API账户状态正常
- 查看具体错误代码：
  - `52001`: APP ID无效
  - `52002`: 签名错误（已修复MD5算法）
  - `54004`: 账户余额不足

#### 3. 翻译功能不工作
**症状**：视频播放但没有字幕显示
**解决方案**：
- 确保已正确配置API密钥
- 检查麦克风权限是否已授予
- 确认网站支持音频捕获
- 查看浏览器控制台是否有错误信息

#### 4. 权限问题
**症状**：功能受限或无法访问某些网站
**解决方案**：
- 检查manifest.json中的权限配置
- 确保host_permissions包含目标网站
- 重新加载扩展程序

## 📊 技术修复说明

### 已修复的问题
1. **MD5签名算法**：将简化版MD5替换为完整实现
2. **API权限**：添加百度翻译API域名到host_permissions
3. **错误处理**：改进API调用的错误处理机制

### 修复的文件
- `src/popup/popup.js` - 修复MD5算法
- `src/utils/translator.js` - 修复MD5算法
- `src/content.js` - 修复MD5算法
- `manifest.json` - 添加API权限

## 🆘 获取帮助

如果遇到问题：
1. 查看浏览器控制台错误信息
2. 使用测试页面进行诊断
3. 检查扩展程序页面的错误日志
4. 确认所有配置步骤都已正确完成

## 📝 开发者信息

- **版本**: 1.0.0
- **最后更新**: 2024年
- **支持的浏览器**: Chrome (Manifest V3)
- **API服务**: 百度翻译API

---

**注意**: 此扩展需要网络连接和麦克风权限才能正常工作。首次使用时，浏览器会请求相关权限，请点击"允许"。